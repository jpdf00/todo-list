(()=>{"use strict";const e=(e,t)=>({id:e,name:t}),t=function(t){if(null===localStorage.getItem(`${t}`)){let n;switch(t){case"projects":n=[e(0,"Default Project")];break;case"tasks":n=[];break;case"projectCount":case"taskCount":n=0;break;case"currentProject":n="";break;default:n=null}localStorage.setItem(`${t}`,JSON.stringify(n))}};function n(e){const t=document.querySelector("#projectsContent"),n=(e=>{const t=JSON.parse(localStorage.getItem("currentProject")),n=e.name===t?"itemCardReversed flexContainer":"itemCard flexContainer",r=document.createElement("div");r.setAttribute("class",`${n}`),r.setAttribute("id",`project${e.id}`);const a=document.createElement("p");a.setAttribute("class","project projectSort"),a.setAttribute("id",`project${e.id}`),a.textContent=e.name;const o=document.createElement("i");o.setAttribute("class","editProject projectBtn fas fa-edit"),o.setAttribute("id",`editProject${e.id}`);const c=document.createElement("i");return c.setAttribute("class","deleteProject projectBtn far fa-trash-alt"),c.setAttribute("id",`deleteProject${e.id}`),r.appendChild(a),r.appendChild(o),r.appendChild(c),r})(e);t.appendChild(n)}function r(e){const t=document.querySelector("#taskProject"),n=document.createElement("option");n.setAttribute("value",`${e}`),n.textContent=e,t.appendChild(n)}function a(e){const t=document.querySelector("#tasksContent"),n=(e=>{const t=JSON.parse(localStorage.getItem("currentProject")),n=e.project!==t&&t?"itemCard displayNone":"itemCard flexColumn",r=document.createElement("div");r.setAttribute("class",`${n}`),r.setAttribute("id",`task${e.id}`);const a=document.createElement("div"),o=e.completed?"flexContainer  disabled":"flexContainer";a.setAttribute("class",`${o}`);const c=document.createElement("h2");c.setAttribute("class","title"),c.setAttribute("id",`taskName${e.id}`),c.textContent=e.name,a.appendChild(c);const s=document.createElement("p");s.setAttribute("class","dateFormat"),s.setAttribute("id",`taskDueDate${e.id}`),s.textContent=e.dueDate.split("-").reverse().join("/"),a.appendChild(s);const l=document.createElement("div");l.setAttribute("class","flexColumn");const i=document.createElement("i"),u=e.completed?"taksCompleted alignUp projectBtn far fa-calendar-check completeTask":"taksPending alignUp projectBtn far fa-calendar completeTask";i.setAttribute("class",`${u}`),i.setAttribute("id",`completeTask${e.id}`),l.appendChild(i);const d=document.createElement("i");d.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"),d.setAttribute("id",`showDetail${e.id}`),l.appendChild(d),a.appendChild(l),r.appendChild(a);const m=document.createElement("div");m.setAttribute("class","taskDetail"),m.setAttribute("id",`taskDetail${e.id}`),m.setAttribute("hidden","true");const p=document.createElement("div");p.setAttribute("class","flexContainer");const f=document.createElement("div");f.setAttribute("class","flexContainer detailStyle detailSize");const S=document.createElement("p");S.setAttribute("class","marginRight"),S.setAttribute("id",`taskDescription${e.id}`),S.textContent=e.description,f.appendChild(S);const k=document.createElement("p");k.setAttribute("class","marginRight"),k.setAttribute("id",`taskPriority${e.id}`),k.textContent=e.priority,f.appendChild(k);const C=document.createElement("p");C.setAttribute("class","marginRight"),C.setAttribute("id",`taskProject${e.id}`),C.textContent=e.project,f.appendChild(C),p.appendChild(f);const v=document.createElement("div");v.setAttribute("class","flexContainer detailStyle");const g=document.createElement("i");g.setAttribute("class","editTask projectBtn marginRight fas fa-edit"),g.setAttribute("id",`editTask${e.id}`),v.appendChild(g);const b=document.createElement("i");return b.setAttribute("class","deleteTask projectBtn marginRight far fa-trash-alt"),b.setAttribute("id",`deleteTask${e.id}`),v.appendChild(b),p.appendChild(v),m.appendChild(p),r.appendChild(m),r})(e);t.appendChild(n)}const o=function(){const e=document.querySelectorAll(".showDetail"),t=document.querySelectorAll(".completeTask"),n=document.querySelectorAll(".editTask"),r=document.querySelectorAll(".deleteTask");e.forEach((e=>{e.addEventListener("click",(()=>{!function(e){const t=parseInt(e.id.match(/\d+/gm),10),n=document.querySelector(`#taskDetail${t}`);n.hasAttribute("hidden")?(n.removeAttribute("hidden"),e.setAttribute("class","alignDown projectBtn fas fa-angle-double-up showDetail")):(n.setAttribute("hidden","true"),e.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"))}(e)}))})),t.forEach((e=>{e.addEventListener("click",(()=>{!function(e){const t=parseInt(e.id.match(/\d+/gm),10),n=document.querySelector(`#task${t}`).firstChild;!function(e){const t=JSON.parse(localStorage.getItem("tasks")),n=t.findIndex((t=>t.id===e));return t[n].completed=!t[n].completed,localStorage.setItem("tasks",JSON.stringify(t)),t[n].completed}(t)?(e.setAttribute("class","taksPending alignUp projectBtn far fa-calendar completeTask"),n.setAttribute("class","flexContainer")):(e.setAttribute("class","taksCompleted alignUp projectBtn far fa-calendar-check completeTask"),n.setAttribute("class","flexContainer  disabled"))}(e)}))})),n.forEach((e=>{e.addEventListener("click",(()=>{!function(e){const t=document.querySelector("#taskFormModal"),n=document.querySelector("#saveTask");(function(e){const t=document.querySelector("#taskName"),n=document.querySelector("#taskDescription"),r=document.querySelector("#taskPriority"),a=document.querySelector("#taskProject"),o=document.querySelector("#taskDueDate"),c=function(e){const t=JSON.parse(localStorage.getItem("tasks")),n=t.findIndex((t=>t.id===e));return t[n]}(e);t.value=c.name,n.value=c.description,r.value=c.priority,a.value=c.project,o.value=c.dueDate})(e),t.removeAttribute("hidden"),n.setAttribute("value",`${e}`)}(parseInt(e.id.match(/\d+/gm),10))}))})),r.forEach((e=>{e.addEventListener("click",(()=>{!function(e){const t=document.querySelector(`#task${e}`);!function(e){const t=JSON.parse(localStorage.getItem("tasks")),n=t.findIndex((t=>t.id===e));t.splice(n,1),localStorage.setItem("tasks",JSON.stringify(t)),t[n]}(e),t.parentElement.removeChild(t)}(parseInt(e.id.match(/\d+/gm),10))}))}))};function c(e){const t=e.target,n=document.querySelector("#tasksContent").children,r=document.querySelectorAll(".projectSort");if("itemCardReversed flexContainer"===t.parentElement.attributes[0].value){t.parentElement.attributes[0].value="itemCard flexContainer";for(let e=0;e<n.length;e+=1)n[e].setAttribute("class","itemCard flexColumn");localStorage.setItem("currentProject",JSON.stringify(""))}else{t.parentElement.attributes[0].value="itemCardReversed flexContainer",r.forEach((e=>{e!==t&&(e.parentElement.attributes[0].value="itemCard flexContainer")}));for(let e=0;e<n.length;e+=1){const r=n[e].lastElementChild.firstElementChild.firstElementChild.lastElementChild;t.textContent===r.textContent?n[e].setAttribute("class","itemCard flexColumn"):n[e].setAttribute("class","itemCard displayNone")}localStorage.setItem("currentProject",JSON.stringify(t.textContent))}}const s=function(){document.querySelectorAll(".projectSort").forEach((e=>{e.addEventListener("click",c)}))};t("projects"),t("tasks"),t("projectCount"),t("taskCount"),t("currentProject"),function(){const e=JSON.parse(localStorage.getItem("tasks"));for(let t=0;t<e.length;t+=1)a(e[t])}(),function(){const e=JSON.parse(localStorage.getItem("projects"));for(let t=0;t<e.length;t+=1)n(e[t]),r(e[t].name)}(),o(),s();const l=document.querySelector("#taskFormModal"),i=document.querySelector("#projectFormModal"),u=document.querySelector("#btnNewTask"),d=document.querySelector("#btnNewProject"),m=document.querySelector("#btnCloseTask"),p=document.querySelector("#btnCloseProject"),f=document.querySelector("#saveTask"),S=document.querySelector("#saveProject");d.addEventListener("click",(()=>{i.removeAttribute("hidden"),S.setAttribute("value","new")})),u.addEventListener("click",(()=>{l.removeAttribute("hidden"),f.setAttribute("value","new")})),p.addEventListener("click",(()=>{i.setAttribute("hidden","true"),S.value=""})),m.addEventListener("click",(()=>{l.setAttribute("hidden","true"),f.value=""})),window.onclick=e=>{e.target===i&&(i.setAttribute("hidden","true"),S.value=""),e.target===l&&(l.setAttribute("hidden","true"),f.value="")},S.addEventListener("click",(()=>{(function(){const t=document.querySelector("#projectName"),a=function(t){const n=JSON.parse(localStorage.getItem("projects"));let r=JSON.parse(localStorage.getItem("projectCount"));r+=1;const a=e(r,t);return n.push(a),localStorage.setItem("projectCount",JSON.stringify(r)),localStorage.setItem("projects",JSON.stringify(n)),a}(t.value);n(a),r(a.name),t.value=""})(),s(),i.setAttribute("hidden","true"),S.value=""})),f.addEventListener("click",(()=>{"new"===f.value?(function(){const e=document.querySelector("#taskName"),t=document.querySelector("#taskDescription"),n=document.querySelector("#taskPriority"),r=document.querySelector("#taskProject"),o=document.querySelector("#taskDueDate");a(function(e,t,n,r,a){const o=JSON.parse(localStorage.getItem("tasks"));let c=JSON.parse(localStorage.getItem("taskCount"));const s=((e,t,n,r,a,o,c=!1)=>({id:e,name:t,description:n,priority:r,project:a,dueDate:o,completed:c}))(c,e,t,n,r,a);return c+=1,o.push(s),localStorage.setItem("taskCount",JSON.stringify(c)),localStorage.setItem("tasks",JSON.stringify(o)),s}(e.value,t.value,n.value,r.value,o.value)),e.value="",t.value="",n.value="Low",r.value="Default Project",o.value=""}(),o()):function(e){const t=document.querySelector("#taskName"),n=document.querySelector("#taskDescription"),r=document.querySelector("#taskPriority"),a=document.querySelector("#taskProject"),o=document.querySelector("#taskDueDate"),c=document.querySelector(`#taskName${e}`),s=document.querySelector(`#taskDescription${e}`),l=document.querySelector(`#taskPriority${e}`),i=document.querySelector(`#taskProject${e}`),u=document.querySelector(`#taskDueDate${e}`);!function(e,t,n,r,a,o){const c=JSON.parse(localStorage.getItem("tasks")),s=c.findIndex((t=>t.id===e));c[s].name=t,c[s].description=n,c[s].priority=r,c[s].project=a,c[s].dueDate=o,localStorage.setItem("tasks",JSON.stringify(c)),c[s]}(e,t.value,n.value,r.value,a.value,o.value),c.textContent=t.value,s.textContent=n.value,l.textContent=r.value,i.textContent=a.value,u.textContent=o.value.split("-").reverse().join("/"),t.value="",n.value="",r.value="Low",a.value="Default Project",o.value=""}(parseInt(f.value,10)),l.setAttribute("hidden","true"),f.value=""}))})();