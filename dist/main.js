(()=>{"use strict";const t=(t,e)=>({id:t,name:e}),e=function(e){if(null===localStorage.getItem(`${e}`)){let r;switch(e){case"projects":r=[t(0,"Default")];break;case"tasks":r=[];break;case"projectCount":case"taskCount":r=0;break;case"currentProject":r="";break;default:r=null}localStorage.setItem(`${e}`,JSON.stringify(r))}};function r(t){const e=document.querySelector("#tasksContent"),r=(t=>{const e=JSON.parse(localStorage.getItem("currentProject"));let r="taskCard";switch(t.priority){case"Lowest Priority":r+=" taskPriorityLowest";break;case"Low Priority":r+=" taskPriorityLow";break;case"Medium Priority":r+=" taskPriorityMedium";break;case"High Priority":r+=" taskPriorityHigh";break;case"Highest Priority":r+=" taskPriorityHighest";break;default:r+=""}const a=document.createElement("div");t.project!==e&&e&&a.setAttribute("hidden","true");const o=document.createElement("div");o.setAttribute("class",`${r}`),o.setAttribute("id",`task${t.id}`);const n=document.createElement("div");n.setAttribute("class","taskCardInfo");const c=document.createElement("i"),s=t.completed?"taksCompleted far fa-calendar-check completeTask":"taksPending far fa-calendar completeTask";c.setAttribute("class",`${s}`),c.setAttribute("id",`completeTask${t.id}`),n.appendChild(c);const i=document.createElement("div"),l=t.completed?"taskCardInfo  disabled":"taskCardInfo";i.setAttribute("class",`${l}`),i.setAttribute("id",`taskCardInfo${t.id}`);const u=document.createElement("h2");u.setAttribute("class","title"),u.setAttribute("id",`taskName${t.id}`),u.textContent=t.name,i.appendChild(u);const d=document.createElement("p");d.setAttribute("class","taskDate"),d.setAttribute("id",`taskDueDate${t.id}`),d.textContent=t.dueDate.split("-").reverse().join("/"),i.appendChild(d),n.appendChild(i);const m=document.createElement("i");m.setAttribute("class","alignDown projectBtn fas fa-angle-double-down taskShow"),m.setAttribute("id",`taskShow${t.id}`),n.appendChild(m),o.appendChild(n);const p=document.createElement("div");p.setAttribute("class","taskDetail"),p.setAttribute("id",`taskDetail${t.id}`),p.setAttribute("hidden","true");const k=document.createElement("div");k.setAttribute("class","taskCardInfo");const S=document.createElement("div");S.setAttribute("class","taskDetailInfo");const f=document.createElement("p");f.setAttribute("class","taskDetailText"),f.setAttribute("id",`taskDescription${t.id}`),f.textContent=t.description,S.appendChild(f);const h=document.createElement("p");h.setAttribute("class","taskDetailText"),h.setAttribute("id",`taskPriority${t.id}`),h.textContent=t.priority,S.appendChild(h);const v=document.createElement("p");v.setAttribute("class","taskDetailText"),v.setAttribute("id",`taskProject${t.id}`),v.textContent=t.project,S.appendChild(v),k.appendChild(S);const g=document.createElement("div");g.setAttribute("class","taskDetailBtns");const y=document.createElement("i");y.setAttribute("class","taskEdit fas fa-edit"),y.setAttribute("id",`taskEdit${t.id}`),g.appendChild(y);const b=document.createElement("i");return b.setAttribute("class","taskDelete far fa-trash-alt"),b.setAttribute("id",`taskDelete${t.id}`),g.appendChild(b),k.appendChild(g),p.appendChild(k),o.appendChild(p),a.appendChild(o),a})(t);e.appendChild(r)}function a(t){const e=document.querySelector("#projectsContent"),r=(t=>{const e=JSON.parse(localStorage.getItem("currentProject")),r=t.name===e?"projectCardReversed":"projectCard",a=document.createElement("div");a.setAttribute("class",`${r}`),a.setAttribute("id",`project${t.id}`);const o=document.createElement("p");o.setAttribute("class","projectSort"),o.setAttribute("id",`projectName${t.id}`),o.textContent=t.name;const n=document.createElement("div");n.setAttribute("class","projectBtns");const c=document.createElement("i");c.setAttribute("class","projectEdit fas fa-edit"),c.setAttribute("id",`projectEdit${t.id}`);const s=document.createElement("i");return s.setAttribute("class","projectDelete far fa-trash-alt"),s.setAttribute("id",`projectDelete${t.id}`),a.appendChild(o),n.appendChild(c),n.appendChild(s),a.appendChild(n),a})(t);e.appendChild(r)}function o(t){const e=document.querySelector("#taskProject"),r=document.createElement("option");r.setAttribute("value",`${t}`),r.textContent=t,e.appendChild(r)}function n(t){const e=t.target,r=parseInt(e.id.match(/\d+/gm),10),a=document.querySelector(`#taskDetail${r}`);a.hasAttribute("hidden")?(a.removeAttribute("hidden"),e.setAttribute("class","fas fa-angle-double-up taskShow")):(a.setAttribute("hidden","true"),e.setAttribute("class","fas fa-angle-double-down taskShow"))}function c(t){const e=t.target,r=parseInt(e.id.match(/\d+/gm),10),a=document.querySelector(`#taskCardInfo${r}`);!function(t){const e=JSON.parse(localStorage.getItem("tasks")),r=e.findIndex((e=>e.id===t));return e[r].completed=!e[r].completed,localStorage.setItem("tasks",JSON.stringify(e)),e[r].completed}(r)?(e.setAttribute("class","taksPending far fa-calendar completeTask"),a.setAttribute("class","taskCardInfo")):(e.setAttribute("class","taksCompleted far fa-calendar-check completeTask"),a.setAttribute("class","taskCardInfo  disabled"))}function s(t){const e=t.target,r=parseInt(e.id.match(/\d+/gm),10),a=document.querySelector("#taskFormModal"),o=document.querySelector("#saveTask");(function(t){const e=document.querySelector("#taskName"),r=document.querySelector("#taskDescription"),a=document.querySelector("#taskPriority"),o=document.querySelector("#taskProject"),n=document.querySelector("#taskDueDate"),c=function(t){const e=JSON.parse(localStorage.getItem("tasks")),r=e.findIndex((e=>e.id===t));return e[r]}(t);e.value=c.name,r.value=c.description,a.value=c.priority,o.value=c.project,n.value=c.dueDate})(r),a.removeAttribute("hidden"),o.setAttribute("value",`${r}`)}function i(t){const e=t.target;!function(t){const e=document.querySelector(`#task${t}`);!function(t){const e=JSON.parse(localStorage.getItem("tasks")),r=e.findIndex((e=>e.id===t));e.splice(r,1),localStorage.setItem("tasks",JSON.stringify(e)),e[r]}(t),e.parentElement.removeChild(e)}(parseInt(e.id.match(/\d+/gm),10))}const l=function(){const t=document.querySelectorAll(".taskShow"),e=document.querySelectorAll(".completeTask"),r=document.querySelectorAll(".taskEdit"),a=document.querySelectorAll(".taskDelete");t.forEach((t=>{t.addEventListener("click",n)})),e.forEach((t=>{t.addEventListener("click",c)})),r.forEach((t=>{t.addEventListener("click",s)})),a.forEach((t=>{t.addEventListener("click",i)}))};function u(t){const e=t.target,r=document.querySelector("#tasksContent").children,a=document.querySelectorAll(".projectSort");if("projectCardReversed"===e.parentElement.attributes[0].value){e.parentElement.attributes[0].value="projectCard";for(let t=0;t<r.length;t+=1)r[t].removeAttribute("hidden");localStorage.setItem("currentProject",JSON.stringify(""))}else{e.parentElement.attributes[0].value="projectCardReversed",a.forEach((t=>{t!==e&&(t.parentElement.attributes[0].value="projectCard")}));for(let t=0;t<r.length;t+=1){const a=r[t].firstElementChild.lastElementChild.firstElementChild.firstElementChild.lastElementChild;e.textContent===a.textContent?r[t].removeAttribute("hidden"):r[t].setAttribute("hidden","true")}localStorage.setItem("currentProject",JSON.stringify(e.textContent))}}function d(t){const e=t.target,r=parseInt(e.id.match(/\d+/gm),10),a=document.querySelector("#projectFormModal"),o=document.querySelector("#saveProject");(function(t){const e=document.querySelector("#projectName"),r=function(t){const e=JSON.parse(localStorage.getItem("projects")),r=e.findIndex((e=>e.id===t));return e[r]}(t);e.value=r.name})(r),a.removeAttribute("hidden"),o.setAttribute("value",`${r}`)}function m(t){const e=t.target;!function(t){const e=document.querySelector(`#project${t}`),r=function(t){const e=JSON.parse(localStorage.getItem("projects")),r=e.findIndex((e=>e.id===t)),a=e.splice(r,1);return localStorage.setItem("projects",JSON.stringify(e)),a}(t);console.log(r),function(t){const e=JSON.parse(localStorage.getItem("tasks"));for(let r=0;r=e.findIndex((e=>e.project===t)),-1!==r;)e.splice(r,1);localStorage.setItem("tasks",JSON.stringify(e))}(r[0].name),function(t){const e=document.querySelector("#tasksContent").children;for(let r=0;r<e.length;)t===e[r].firstElementChild.lastElementChild.firstElementChild.firstElementChild.lastElementChild.textContent?e[r].parentElement.removeChild(e[r]):r+=1}(r[0].name),e.parentElement.removeChild(e)}(parseInt(e.id.match(/\d+/gm),10))}const p=function(){const t=document.querySelectorAll(".projectSort"),e=document.querySelectorAll(".projectDelete"),r=document.querySelectorAll(".projectEdit");t.forEach((t=>{t.addEventListener("click",u)})),e.forEach((t=>{t.addEventListener("click",m)})),r.forEach((t=>{t.addEventListener("click",d)}))};e("projects"),e("tasks"),e("projectCount"),e("taskCount"),e("currentProject"),function(){const t=JSON.parse(localStorage.getItem("tasks"));for(let e=0;e<t.length;e+=1)r(t[e])}(),function(){const t=JSON.parse(localStorage.getItem("projects"));for(let e=0;e<t.length;e+=1)a(t[e]),o(t[e].name)}(),l(),p();const k=document.querySelector("#taskFormModal"),S=document.querySelector("#projectFormModal"),f=document.querySelector("#btnNewTask"),h=document.querySelector("#btnNewProject"),v=document.querySelector("#btnCloseTask"),g=document.querySelector("#btnCloseProject"),y=document.querySelector("#saveTask"),b=document.querySelector("#saveProject");h.addEventListener("click",(()=>{S.removeAttribute("hidden"),b.setAttribute("value","new")})),f.addEventListener("click",(()=>{k.removeAttribute("hidden"),y.setAttribute("value","new")})),g.addEventListener("click",(()=>{S.setAttribute("hidden","true"),b.value=""})),v.addEventListener("click",(()=>{k.setAttribute("hidden","true"),y.value=""})),window.onclick=t=>{t.target===S&&(S.setAttribute("hidden","true"),b.value=""),t.target===k&&(k.setAttribute("hidden","true"),y.value="")},b.addEventListener("click",(()=>{"new"===b.value?(function(){const e=document.querySelector("#projectName"),r=function(e){const r=JSON.parse(localStorage.getItem("projects"));let a=JSON.parse(localStorage.getItem("projectCount"));a+=1;const o=t(a,e);return r.push(o),localStorage.setItem("projectCount",JSON.stringify(a)),localStorage.setItem("projects",JSON.stringify(r)),o}(e.value);a(r),o(r.name),e.value=""}(),p()):function(t){const e=document.querySelector("#projectName"),r=document.querySelector(`#projectName${t}`),a=function(t,e){const r=JSON.parse(localStorage.getItem("projects")),a=r.findIndex((e=>e.id===t)),o=r[a].name;return r[a].name=e,localStorage.setItem("projects",JSON.stringify(r)),o}(t,e.value);!function(t,e){const r=JSON.parse(localStorage.getItem("tasks"));for(let a=0;a=r.findIndex((e=>e.project===t)),-1!==a&&t!==e;)r[a].project=e;localStorage.setItem("tasks",JSON.stringify(r))}(a,e.value),function(t,e){const r=document.querySelector("#tasksContent").children;for(let a=0;a<r.length;a+=1){const o=r[a].firstElementChild.lastElementChild.firstElementChild.firstElementChild.lastElementChild;t===o.textContent&&(o.textContent=e)}}(a,e.value),function(t,e){const r=document.querySelector("#taskProject").children;for(let a=0;a<r.length;a+=1){const o=r[a];t===o.value&&(o.textContent=e,o.value=e)}}(a,e.value),r.textContent=e.value,e.value=""}(parseInt(b.value,10)),S.setAttribute("hidden","true"),b.value=""})),y.addEventListener("click",(()=>{"new"===y.value?(function(){const t=document.querySelector("#taskName"),e=document.querySelector("#taskDescription"),a=document.querySelector("#taskPriority"),o=document.querySelector("#taskProject"),n=document.querySelector("#taskDueDate");r(function(t,e,r,a,o){const n=JSON.parse(localStorage.getItem("tasks"));let c=JSON.parse(localStorage.getItem("taskCount"));const s=((t,e,r,a,o,n,c=!1)=>({id:t,name:e,description:r,priority:a,project:o,dueDate:n,completed:c}))(c,t,e,r,a,o);return c+=1,n.push(s),localStorage.setItem("taskCount",JSON.stringify(c)),localStorage.setItem("tasks",JSON.stringify(n)),s}(t.value,e.value,a.value,o.value,n.value)),t.value="",e.value="",a.value="Low",o.value="Default Project",n.value=""}(),l()):function(t){const e=document.querySelector("#taskName"),r=document.querySelector("#taskDescription"),a=document.querySelector("#taskPriority"),o=document.querySelector("#taskProject"),n=document.querySelector("#taskDueDate"),c=document.querySelector(`#task${t}`),s=document.querySelector(`#taskName${t}`),i=document.querySelector(`#taskDescription${t}`),l=document.querySelector(`#taskPriority${t}`),u=document.querySelector(`#taskProject${t}`),d=document.querySelector(`#taskDueDate${t}`);switch(function(t,e,r,a,o,n){const c=JSON.parse(localStorage.getItem("tasks")),s=c.findIndex((e=>e.id===t));c[s].name=e,c[s].description=r,c[s].priority=a,c[s].project=o,c[s].dueDate=n,localStorage.setItem("tasks",JSON.stringify(c)),c[s]}(t,e.value,r.value,a.value,o.value,n.value),s.textContent=e.value,i.textContent=r.value,l.textContent=a.value,u.textContent=o.value,d.textContent=n.value.split("-").reverse().join("/"),a.value){case"Lowest Priority":c.setAttribute("class","taskCard taskPriorityLowest");break;case"Low Priority":c.setAttribute("class","taskCard taskPriorityLow");break;case"Medium Priority":c.setAttribute("class","taskCard taskPriorityMedium");break;case"High Priority":c.setAttribute("class","taskCard taskPriorityHigh");break;case"Highest Priority":c.setAttribute("class","taskCard taskPriorityHighest");break;default:c.setAttribute("class","taskCard")}e.value="",r.value="",a.value="Low",o.value="Default Project",n.value=""}(parseInt(y.value,10)),k.setAttribute("hidden","true"),y.value=""}))})();