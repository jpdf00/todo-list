(()=>{"use strict";const t=(t,e)=>({id:t,name:e});function e(e){if(null===localStorage.getItem(`${e}`)){let n;"projects"===e?n=[t(0,"Default Project")]:"tasks"===e?n=[]:"Count"===e.match(/Count/g).toString()&&(n=0),localStorage.setItem(`${e}`,JSON.stringify(n))}}function n(t){const e=document.querySelector("#projectsContent"),n=(t=>{const e=document.createElement("div");e.setAttribute("class","itemCard flexContainer"),e.setAttribute("id",`project${t.id}`);const n=document.createElement("p");n.setAttribute("class","textFormat"),n.textContent=t.name;const a=document.createElement("i");a.setAttribute("class","editProject projectBtn fas fa-edit"),a.setAttribute("id",`editProject${t.id}`);const r=document.createElement("i");return r.setAttribute("class","deleteProject projectBtn far fa-trash-alt"),r.setAttribute("id",`deleteProject${t.id}`),e.appendChild(n),e.appendChild(a),e.appendChild(r),e})(t);e.appendChild(n)}function a(t){const e=document.querySelector("#tasksContent"),n=(t=>{const e=document.createElement("div");e.setAttribute("class","itemCard flexColumn"),e.setAttribute("id",`task${t.id}`);const n=document.createElement("div");n.setAttribute("class","flexContainer");const a=document.createElement("h2");a.setAttribute("class","title"),a.textContent=t.name,n.appendChild(a);const r=document.createElement("p");r.setAttribute("class","dateFormat"),r.textContent=t.dueDate.split("-").reverse().join("/"),n.appendChild(r);const o=document.createElement("div");o.setAttribute("class","flexColumn");const s=document.createElement("i");s.setAttribute("class","alignUp projectBtn far fa-calendar completeTask"),s.setAttribute("id",`completeTask${t.id}`),o.appendChild(s);const i=document.createElement("i");i.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"),i.setAttribute("id",`showDetail${t.id}`),o.appendChild(i),n.appendChild(o),e.appendChild(n);const c=document.createElement("div");c.setAttribute("class","taskDetail"),c.setAttribute("id",`taskDetail${t.id}`),c.setAttribute("hidden","true");const l=document.createElement("div");l.setAttribute("class","flexContainer");const d=document.createElement("div");d.setAttribute("class","flexContainer detailStyle detailSize");const u=document.createElement("p");u.setAttribute("class","textFormat marginRight"),u.textContent=t.description,d.appendChild(u);const m=document.createElement("p");m.setAttribute("class","textFormat marginRight"),m.textContent=t.priority,d.appendChild(m);const p=document.createElement("p");p.setAttribute("class","textFormat marginRight"),p.textContent=t.project,d.appendChild(p),l.appendChild(d);const h=document.createElement("div");h.setAttribute("class","flexContainer detailStyle");const b=document.createElement("i");b.setAttribute("class","editTask projectBtn marginRight fas fa-edit"),b.setAttribute("id",`editTask${t.id}`),h.appendChild(b);const g=document.createElement("i");return g.setAttribute("class","deleteTask projectBtn marginRight far fa-trash-alt"),g.setAttribute("id",`deleteTask${t.id}`),h.appendChild(g),l.appendChild(h),c.appendChild(l),e.appendChild(c),e})(t);e.appendChild(n)}e("projects"),e("tasks"),e("projectCount"),e("taskCount"),function(){const t=JSON.parse(localStorage.getItem("projects"));for(let e=0;e<t.length;e+=1)n(t[e])}(),function(){const t=JSON.parse(localStorage.getItem("tasks"));for(let e=0;e<t.length;e+=1)a(t[e])}();const r=document.querySelector("#projectFormModal"),o=document.querySelector("#taskFormModal"),s=document.querySelector("#btnNewProject"),i=document.querySelector("#btnNewTask"),c=document.querySelector("#btnCloseProject"),l=document.querySelector("#btnCloseTask"),d=document.querySelector("#saveProject"),u=document.querySelector("#saveTask"),m=document.querySelectorAll(".showDetail");s.addEventListener("click",(()=>{r.removeAttribute("hidden"),d.setAttribute("value","new")})),i.addEventListener("click",(()=>{o.removeAttribute("hidden"),u.setAttribute("value","new")})),c.addEventListener("click",(()=>{r.setAttribute("hidden","true")})),l.addEventListener("click",(()=>{o.setAttribute("hidden","true")})),window.onclick=function(t){t.target==r&&r.setAttribute("hidden","true"),t.target==o&&o.setAttribute("hidden","true")},showDetail.addEventListener("click",(()=>{taskDetail.hasAttribute("hidden")?(taskDetail.removeAttribute("hidden"),showDetail.setAttribute("class","alignDown projectBtn fas fa-angle-double-up showDetail")):(taskDetail.setAttribute("hidden","true"),showDetail.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"))})),d.addEventListener("click",(()=>{(function(){const e=document.querySelector("#projectName");n(function(e){const n=JSON.parse(localStorage.getItem("projects"));let a=JSON.parse(localStorage.getItem("projectCount"));a+=1;const r=t(a,e);return n.push(r),localStorage.setItem("projectCount",JSON.stringify(a)),localStorage.setItem("projects",JSON.stringify(n)),r}(e.value)),e.value=""})(),r.setAttribute("hidden","true"),d.value=""})),u.addEventListener("click",(()=>{(function(){const t=document.querySelector("#taskName"),e=document.querySelector("#taskDescription"),n=document.querySelector("#taskPriority"),r=document.querySelector("#taskProject"),o=document.querySelector("#taskDueDate");a(function(t,e,n,a,r){const o=JSON.parse(localStorage.getItem("tasks"));let s=JSON.parse(localStorage.getItem("taskCount"));const i=((t,e,n,a,r,o,s=!1)=>({id:t,name:e,description:n,priority:a,project:r,dueDate:o,completed:s}))(s,t,e,n,a,r);return s+=1,o.push(i),localStorage.setItem("taskCount",JSON.stringify(s)),localStorage.setItem("tasks",JSON.stringify(o)),i}(t.value,e.value,n.value,r.value,o.value)),t.value="",e.value="",n.value="",r.value="",o.value=""})(),o.setAttribute("hidden","true"),u.value=""})),m.forEach((t=>{t.addEventListener("click",(()=>{const e=parseInt(t.id.match(/\d+/gm),10),n=document.querySelector(`#taskDetail${e}`);n.hasAttribute("hidden")?(n.removeAttribute("hidden"),t.setAttribute("class","alignDown projectBtn fas fa-angle-double-up showDetail")):(n.setAttribute("hidden","true"),t.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"))}))}))})();