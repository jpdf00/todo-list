(()=>{"use strict";const e=(e,t)=>({id:e,name:t});function t(t){if(null===localStorage.getItem(`${t}`)){let n;switch(t){case"projects":n=[e(0,"Default Project")];break;case"tasks":n=[];break;case"projectCount":case"taskCount":n=0;break;case"currentProject":n="";break;default:n=null}localStorage.setItem(`${t}`,JSON.stringify(n))}}function n(e){const t=document.querySelector("#projectsContent"),n=(e=>{const t=JSON.parse(localStorage.getItem("currentProject")),n=e.name===t?"itemCardReversed flexContainer":"itemCard flexContainer",r=document.createElement("div");r.setAttribute("class",`${n}`),r.setAttribute("id",`project${e.id}`);const a=document.createElement("p");a.setAttribute("class","project projectSort"),a.setAttribute("id",`project${e.id}`),a.textContent=e.name;const o=document.createElement("i");o.setAttribute("class","editProject projectBtn fas fa-edit"),o.setAttribute("id",`editProject${e.id}`);const c=document.createElement("i");return c.setAttribute("class","deleteProject projectBtn far fa-trash-alt"),c.setAttribute("id",`deleteProject${e.id}`),r.appendChild(a),r.appendChild(o),r.appendChild(c),r})(e);t.appendChild(n)}function r(e){const t=document.querySelector("#taskProject"),n=document.createElement("option");n.setAttribute("value",`${e}`),n.textContent=e,t.appendChild(n)}function a(e){const t=document.querySelector("#tasksContent"),n=(e=>{const t=JSON.parse(localStorage.getItem("currentProject")),n=e.project!==t&&t?"itemCard displayNone":"itemCard flexColumn",r=document.createElement("div");r.setAttribute("class",`${n}`),r.setAttribute("id",`task${e.id}`);const a=document.createElement("div"),o=e.completed?"flexContainer  disabled":"flexContainer";a.setAttribute("class",`${o}`);const c=document.createElement("h2");c.setAttribute("class","title"),c.textContent=e.name,a.appendChild(c);const s=document.createElement("p");s.setAttribute("class","dateFormat"),s.textContent=e.dueDate.split("-").reverse().join("/"),a.appendChild(s);const l=document.createElement("div");l.setAttribute("class","flexColumn");const i=document.createElement("i"),d=e.completed?"taksCompleted alignUp projectBtn far fa-calendar-check completeTask":"taksPending alignUp projectBtn far fa-calendar completeTask";i.setAttribute("class",`${d}`),i.setAttribute("id",`completeTask${e.id}`),l.appendChild(i);const u=document.createElement("i");u.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"),u.setAttribute("id",`showDetail${e.id}`),l.appendChild(u),a.appendChild(l),r.appendChild(a);const m=document.createElement("div");m.setAttribute("class","taskDetail"),m.setAttribute("id",`taskDetail${e.id}`),m.setAttribute("hidden","true");const p=document.createElement("div");p.setAttribute("class","flexContainer");const C=document.createElement("div");C.setAttribute("class","flexContainer detailStyle detailSize");const f=document.createElement("p");f.setAttribute("class","marginRight"),f.textContent=e.description,C.appendChild(f);const b=document.createElement("p");b.setAttribute("class","marginRight"),b.textContent=e.priority,C.appendChild(b);const h=document.createElement("p");h.setAttribute("class","marginRight"),h.textContent=e.project,C.appendChild(h),p.appendChild(C);const g=document.createElement("div");g.setAttribute("class","flexContainer detailStyle");const S=document.createElement("i");S.setAttribute("class","editTask projectBtn marginRight fas fa-edit"),S.setAttribute("id",`editTask${e.id}`),g.appendChild(S);const k=document.createElement("i");return k.setAttribute("class","deleteTask projectBtn marginRight far fa-trash-alt"),k.setAttribute("id",`deleteTask${e.id}`),g.appendChild(k),p.appendChild(g),m.appendChild(p),r.appendChild(m),r})(e);t.appendChild(n)}t("projects"),t("tasks"),t("projectCount"),t("taskCount"),t("currentProject"),function(){const e=JSON.parse(localStorage.getItem("tasks"));for(let t=0;t<e.length;t+=1)a(e[t])}(),function(){const e=JSON.parse(localStorage.getItem("projects"));for(let t=0;t<e.length;t+=1)n(e[t]),r(e[t].name)}();const o=document.querySelector("#projectFormModal"),c=document.querySelector("#taskFormModal"),s=document.querySelector("#btnNewProject"),l=document.querySelector("#btnNewTask"),i=document.querySelector("#btnCloseProject"),d=document.querySelector("#btnCloseTask"),u=document.querySelector("#saveProject"),m=document.querySelector("#saveTask"),p=document.querySelectorAll(".projectSort"),C=document.querySelectorAll(".showDetail"),f=document.querySelectorAll(".completeTask");s.addEventListener("click",(()=>{o.removeAttribute("hidden"),u.setAttribute("value","new")})),l.addEventListener("click",(()=>{c.removeAttribute("hidden"),m.setAttribute("value","new")})),i.addEventListener("click",(()=>{o.setAttribute("hidden","true")})),d.addEventListener("click",(()=>{c.setAttribute("hidden","true")})),window.onclick=e=>{e.target===o&&o.setAttribute("hidden","true"),e.target===c&&c.setAttribute("hidden","true")},u.addEventListener("click",(()=>{(function(){const t=document.querySelector("#projectName"),a=function(t){const n=JSON.parse(localStorage.getItem("projects"));let r=JSON.parse(localStorage.getItem("projectCount"));r+=1;const a=e(r,t);return n.push(a),localStorage.setItem("projectCount",JSON.stringify(r)),localStorage.setItem("projects",JSON.stringify(n)),a}(t.value);n(a),r(a.name),t.value=""})(),o.setAttribute("hidden","true"),u.value=""})),m.addEventListener("click",(()=>{(function(){const e=document.querySelector("#taskName"),t=document.querySelector("#taskDescription"),n=document.querySelector("#taskPriority"),r=document.querySelector("#taskProject"),o=document.querySelector("#taskDueDate");a(function(e,t,n,r,a){const o=JSON.parse(localStorage.getItem("tasks"));let c=JSON.parse(localStorage.getItem("taskCount"));const s=((e,t,n,r,a,o,c=!1)=>({id:e,name:t,description:n,priority:r,project:a,dueDate:o,completed:c}))(c,e,t,n,r,a);return c+=1,o.push(s),localStorage.setItem("taskCount",JSON.stringify(c)),localStorage.setItem("tasks",JSON.stringify(o)),s}(e.value,t.value,n.value,r.value,o.value)),e.value="",t.value="",n.value="",r.value="",o.value=""})(),c.setAttribute("hidden","true"),m.value=""})),C.forEach((e=>{e.addEventListener("click",(()=>{const t=parseInt(e.id.match(/\d+/gm),10),n=document.querySelector(`#taskDetail${t}`);n.hasAttribute("hidden")?(n.removeAttribute("hidden"),e.setAttribute("class","alignDown projectBtn fas fa-angle-double-up showDetail")):(n.setAttribute("hidden","true"),e.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"))}))})),f.forEach((e=>{e.addEventListener("click",(()=>{const t=parseInt(e.id.match(/\d+/gm),10),n=document.querySelector(`#task${t}`).firstChild;!function(e){const t=JSON.parse(localStorage.getItem("tasks")),n=t.findIndex((t=>t.id===e));return t[n].completed=!t[n].completed,localStorage.setItem("tasks",JSON.stringify(t)),t[n].completed}(t)?(e.setAttribute("class","taksPending alignUp projectBtn far fa-calendar completeTask"),n.setAttribute("class","flexContainer")):(e.setAttribute("class","taksCompleted alignUp projectBtn far fa-calendar-check completeTask"),n.setAttribute("class","flexContainer  disabled"))}))})),p.forEach((e=>{e.addEventListener("click",(()=>{const t=document.querySelector("#tasksContent").children;if("itemCardReversed flexContainer"===e.parentElement.attributes[0].value){e.parentElement.attributes[0].value="itemCard flexContainer";for(let e=0;e<t.length;e+=1)t[e].setAttribute("class","itemCard flexColumn");localStorage.setItem("currentProject",JSON.stringify(""))}else{e.parentElement.attributes[0].value="itemCardReversed flexContainer",p.forEach((t=>{t!==e&&(t.parentElement.attributes[0].value="itemCard flexContainer")}));for(let n=0;n<t.length;n+=1){const r=t[n].lastElementChild.firstElementChild.firstElementChild.lastElementChild;e.textContent===r.textContent?t[n].setAttribute("class","itemCard flexColumn"):t[n].setAttribute("class","itemCard displayNone")}localStorage.setItem("currentProject",JSON.stringify(e.textContent))}}))}))})();