(()=>{"use strict";const e=(e,t)=>({id:e,name:t}),t=function(t){if(null===localStorage.getItem(`${t}`)){let n;switch(t){case"projects":n=[e(0,"Default Project")];break;case"tasks":n=[];break;case"projectCount":case"taskCount":n=0;break;case"currentProject":n="";break;default:n=null}localStorage.setItem(`${t}`,JSON.stringify(n))}};function n(e){const t=document.querySelector("#tasksContent"),n=(e=>{const t=JSON.parse(localStorage.getItem("currentProject")),n=e.project!==t&&t?"itemCard displayNone":"itemCard flexColumn",r=document.createElement("div");r.setAttribute("class",`${n}`),r.setAttribute("id",`task${e.id}`);const o=document.createElement("div"),a=e.completed?"displayFlex  disabled":"displayFlex";o.setAttribute("class",`${a}`);const c=document.createElement("h2");c.setAttribute("class","title"),c.setAttribute("id",`taskName${e.id}`),c.textContent=e.name,o.appendChild(c);const l=document.createElement("p");l.setAttribute("class","dateFormat"),l.setAttribute("id",`taskDueDate${e.id}`),l.textContent=e.dueDate.split("-").reverse().join("/"),o.appendChild(l);const s=document.createElement("div");s.setAttribute("class","flexColumn");const i=document.createElement("i"),u=e.completed?"taksCompleted alignUp projectBtn far fa-calendar-check completeTask":"taksPending alignUp projectBtn far fa-calendar completeTask";i.setAttribute("class",`${u}`),i.setAttribute("id",`completeTask${e.id}`),s.appendChild(i);const d=document.createElement("i");d.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"),d.setAttribute("id",`showDetail${e.id}`),s.appendChild(d),o.appendChild(s),r.appendChild(o);const m=document.createElement("div");m.setAttribute("class","taskDetail"),m.setAttribute("id",`taskDetail${e.id}`),m.setAttribute("hidden","true");const p=document.createElement("div");p.setAttribute("class","displayFlex");const S=document.createElement("div");S.setAttribute("class","displayFlex detailStyle detailSize");const f=document.createElement("p");f.setAttribute("class","marginRight"),f.setAttribute("id",`taskDescription${e.id}`),f.textContent=e.description,S.appendChild(f);const g=document.createElement("p");g.setAttribute("class","marginRight"),g.setAttribute("id",`taskPriority${e.id}`),g.textContent=e.priority,S.appendChild(g);const k=document.createElement("p");k.setAttribute("class","marginRight"),k.setAttribute("id",`taskProject${e.id}`),k.textContent=e.project,S.appendChild(k),p.appendChild(S);const v=document.createElement("div");v.setAttribute("class","displayFlex detailStyle");const h=document.createElement("i");h.setAttribute("class","editTask projectBtn marginRight fas fa-edit"),h.setAttribute("id",`editTask${e.id}`),v.appendChild(h);const C=document.createElement("i");return C.setAttribute("class","deleteTask projectBtn marginRight far fa-trash-alt"),C.setAttribute("id",`deleteTask${e.id}`),v.appendChild(C),p.appendChild(v),m.appendChild(p),r.appendChild(m),r})(e);t.appendChild(n)}function r(e){const t=document.querySelector("#projectsContent"),n=(e=>{const t=JSON.parse(localStorage.getItem("currentProject")),n=e.name===t?"projectCardReversed":"projectCard",r=document.createElement("div");r.setAttribute("class",`${n}`),r.setAttribute("id",`project${e.id}`);const o=document.createElement("p");o.setAttribute("class","projectSort"),o.setAttribute("id",`projectName${e.id}`),o.textContent=e.name;const a=document.createElement("div");a.setAttribute("class","projectBtns");const c=document.createElement("i");c.setAttribute("class","projectEdit fas fa-edit"),c.setAttribute("id",`projectEdit${e.id}`);const l=document.createElement("i");return l.setAttribute("class","projectDelete far fa-trash-alt"),l.setAttribute("id",`projectDelete${e.id}`),r.appendChild(o),a.appendChild(c),a.appendChild(l),r.appendChild(a),r})(e);t.appendChild(n)}function o(e){const t=document.querySelector("#taskProject"),n=document.createElement("option");n.setAttribute("value",`${e}`),n.textContent=e,t.appendChild(n)}function a(e){const t=e.target,n=parseInt(t.id.match(/\d+/gm),10),r=document.querySelector(`#taskDetail${n}`);r.hasAttribute("hidden")?(r.removeAttribute("hidden"),t.setAttribute("class","alignDown projectBtn fas fa-angle-double-up showDetail")):(r.setAttribute("hidden","true"),t.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"))}function c(e){const t=e.target,n=parseInt(t.id.match(/\d+/gm),10),r=document.querySelector(`#task${n}`).firstChild;!function(e){const t=JSON.parse(localStorage.getItem("tasks")),n=t.findIndex((t=>t.id===e));return t[n].completed=!t[n].completed,localStorage.setItem("tasks",JSON.stringify(t)),t[n].completed}(n)?(t.setAttribute("class","taksPending alignUp projectBtn far fa-calendar completeTask"),r.setAttribute("class","displayFlex")):(t.setAttribute("class","taksCompleted alignUp projectBtn far fa-calendar-check completeTask"),r.setAttribute("class","displayFlex  disabled"))}function l(e){const t=e.target,n=parseInt(t.id.match(/\d+/gm),10),r=document.querySelector("#taskFormModal"),o=document.querySelector("#saveTask");(function(e){const t=document.querySelector("#taskName"),n=document.querySelector("#taskDescription"),r=document.querySelector("#taskPriority"),o=document.querySelector("#taskProject"),a=document.querySelector("#taskDueDate"),c=function(e){const t=JSON.parse(localStorage.getItem("tasks")),n=t.findIndex((t=>t.id===e));return t[n]}(e);t.value=c.name,n.value=c.description,r.value=c.priority,o.value=c.project,a.value=c.dueDate})(n),r.removeAttribute("hidden"),o.setAttribute("value",`${n}`)}function s(e){const t=e.target;!function(e){const t=document.querySelector(`#task${e}`);!function(e){const t=JSON.parse(localStorage.getItem("tasks")),n=t.findIndex((t=>t.id===e));t.splice(n,1),localStorage.setItem("tasks",JSON.stringify(t)),t[n]}(e),t.parentElement.removeChild(t)}(parseInt(t.id.match(/\d+/gm),10))}const i=function(){const e=document.querySelectorAll(".showDetail"),t=document.querySelectorAll(".completeTask"),n=document.querySelectorAll(".editTask"),r=document.querySelectorAll(".deleteTask");e.forEach((e=>{e.addEventListener("click",a)})),t.forEach((e=>{e.addEventListener("click",c)})),n.forEach((e=>{e.addEventListener("click",l)})),r.forEach((e=>{e.addEventListener("click",s)}))};function u(e){const t=e.target,n=document.querySelector("#tasksContent").children,r=document.querySelectorAll(".projectSort");if("projectCardReversed"===t.parentElement.attributes[0].value){t.parentElement.attributes[0].value="projectCard";for(let e=0;e<n.length;e+=1)n[e].setAttribute("class","itemCard flexColumn");localStorage.setItem("currentProject",JSON.stringify(""))}else{t.parentElement.attributes[0].value="projectCardReversed",r.forEach((e=>{e!==t&&(e.parentElement.attributes[0].value="projectCard")}));for(let e=0;e<n.length;e+=1){const r=n[e].lastElementChild.firstElementChild.firstElementChild.lastElementChild;t.textContent===r.textContent?n[e].setAttribute("class","itemCard flexColumn"):n[e].setAttribute("class","itemCard displayNone")}localStorage.setItem("currentProject",JSON.stringify(t.textContent))}}function d(e){const t=e.target,n=parseInt(t.id.match(/\d+/gm),10),r=document.querySelector("#projectFormModal"),o=document.querySelector("#saveProject");(function(e){const t=document.querySelector("#projectName"),n=function(e){const t=JSON.parse(localStorage.getItem("projects")),n=t.findIndex((t=>t.id===e));return t[n]}(e);t.value=n.name})(n),r.removeAttribute("hidden"),o.setAttribute("value",`${n}`)}function m(e){const t=e.target;!function(e){const t=document.querySelector(`#project${e}`),n=function(e){const t=JSON.parse(localStorage.getItem("projects")),n=t.findIndex((t=>t.id===e)),r=t.splice(n,1);return localStorage.setItem("projects",JSON.stringify(t)),r}(e);console.log(n),function(e){const t=JSON.parse(localStorage.getItem("tasks"));for(let n=0;n=t.findIndex((t=>t.project===e)),-1!==n;)t.splice(n,1);localStorage.setItem("tasks",JSON.stringify(t))}(n[0].name),function(e){const t=document.querySelector("#tasksContent").children;for(let n=0;n<t.length;)e===t[n].lastElementChild.firstElementChild.firstElementChild.lastElementChild.textContent?t[n].parentElement.removeChild(t[n]):n+=1}(n[0].name),t.parentElement.removeChild(t)}(parseInt(t.id.match(/\d+/gm),10))}const p=function(){const e=document.querySelectorAll(".projectSort"),t=document.querySelectorAll(".projectDelete"),n=document.querySelectorAll(".projectEdit");e.forEach((e=>{e.addEventListener("click",u)})),t.forEach((e=>{e.addEventListener("click",m)})),n.forEach((e=>{e.addEventListener("click",d)}))};t("projects"),t("tasks"),t("projectCount"),t("taskCount"),t("currentProject"),function(){const e=JSON.parse(localStorage.getItem("tasks"));for(let t=0;t<e.length;t+=1)n(e[t])}(),function(){const e=JSON.parse(localStorage.getItem("projects"));for(let t=0;t<e.length;t+=1)r(e[t]),o(e[t].name)}(),i(),p();const S=document.querySelector("#taskFormModal"),f=document.querySelector("#projectFormModal"),g=document.querySelector("#btnNewTask"),k=document.querySelector("#btnNewProject"),v=document.querySelector("#btnCloseTask"),h=document.querySelector("#btnCloseProject"),C=document.querySelector("#saveTask"),y=document.querySelector("#saveProject");k.addEventListener("click",(()=>{f.removeAttribute("hidden"),y.setAttribute("value","new")})),g.addEventListener("click",(()=>{S.removeAttribute("hidden"),C.setAttribute("value","new")})),h.addEventListener("click",(()=>{f.setAttribute("hidden","true"),y.value=""})),v.addEventListener("click",(()=>{S.setAttribute("hidden","true"),C.value=""})),window.onclick=e=>{e.target===f&&(f.setAttribute("hidden","true"),y.value=""),e.target===S&&(S.setAttribute("hidden","true"),C.value="")},y.addEventListener("click",(()=>{"new"===y.value?(function(){const t=document.querySelector("#projectName"),n=function(t){const n=JSON.parse(localStorage.getItem("projects"));let r=JSON.parse(localStorage.getItem("projectCount"));r+=1;const o=e(r,t);return n.push(o),localStorage.setItem("projectCount",JSON.stringify(r)),localStorage.setItem("projects",JSON.stringify(n)),o}(t.value);r(n),o(n.name),t.value=""}(),p()):function(e){const t=document.querySelector("#projectName"),n=document.querySelector(`#projectName${e}`),r=function(e,t){const n=JSON.parse(localStorage.getItem("projects")),r=n.findIndex((t=>t.id===e)),o=n[r].name;return n[r].name=t,localStorage.setItem("projects",JSON.stringify(n)),o}(e,t.value);!function(e,t){const n=JSON.parse(localStorage.getItem("tasks"));for(let r=0;r=n.findIndex((t=>t.project===e)),-1!==r&&e!==t;)n[r].project=t;localStorage.setItem("tasks",JSON.stringify(n))}(r,t.value),function(e,t){const n=document.querySelector("#tasksContent").children;for(let r=0;r<n.length;r+=1){const o=n[r].lastElementChild.firstElementChild.firstElementChild.lastElementChild;e===o.textContent&&(o.textContent=t)}}(r,t.value),function(e,t){const n=document.querySelector("#taskProject").children;for(let r=0;r<n.length;r+=1){const o=n[r];e===o.value&&(o.textContent=t,o.value=t)}}(r,t.value),n.textContent=t.value,t.value=""}(parseInt(y.value,10)),f.setAttribute("hidden","true"),y.value=""})),C.addEventListener("click",(()=>{"new"===C.value?(function(){const e=document.querySelector("#taskName"),t=document.querySelector("#taskDescription"),r=document.querySelector("#taskPriority"),o=document.querySelector("#taskProject"),a=document.querySelector("#taskDueDate");n(function(e,t,n,r,o){const a=JSON.parse(localStorage.getItem("tasks"));let c=JSON.parse(localStorage.getItem("taskCount"));const l=((e,t,n,r,o,a,c=!1)=>({id:e,name:t,description:n,priority:r,project:o,dueDate:a,completed:c}))(c,e,t,n,r,o);return c+=1,a.push(l),localStorage.setItem("taskCount",JSON.stringify(c)),localStorage.setItem("tasks",JSON.stringify(a)),l}(e.value,t.value,r.value,o.value,a.value)),e.value="",t.value="",r.value="Low",o.value="Default Project",a.value=""}(),i()):function(e){const t=document.querySelector("#taskName"),n=document.querySelector("#taskDescription"),r=document.querySelector("#taskPriority"),o=document.querySelector("#taskProject"),a=document.querySelector("#taskDueDate"),c=document.querySelector(`#taskName${e}`),l=document.querySelector(`#taskDescription${e}`),s=document.querySelector(`#taskPriority${e}`),i=document.querySelector(`#taskProject${e}`),u=document.querySelector(`#taskDueDate${e}`);!function(e,t,n,r,o,a){const c=JSON.parse(localStorage.getItem("tasks")),l=c.findIndex((t=>t.id===e));c[l].name=t,c[l].description=n,c[l].priority=r,c[l].project=o,c[l].dueDate=a,localStorage.setItem("tasks",JSON.stringify(c)),c[l]}(e,t.value,n.value,r.value,o.value,a.value),c.textContent=t.value,l.textContent=n.value,s.textContent=r.value,i.textContent=o.value,u.textContent=a.value.split("-").reverse().join("/"),t.value="",n.value="",r.value="Low",o.value="Default Project",a.value=""}(parseInt(C.value,10)),S.setAttribute("hidden","true"),C.value=""}))})();