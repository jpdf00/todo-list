(()=>{"use strict";const e=(e,t)=>({id:e,name:t});function t(t){if(null===localStorage.getItem(`${t}`)){let r;switch(t){case"projects":r=[e(0,"Default Project")];break;case"tasks":r=[];break;case"projectCount":case"taskCount":r=0;break;case"currentProject":r="";break;default:r=null}localStorage.setItem(`${t}`,JSON.stringify(r))}}function r(e){const t=document.querySelector("#projectsContent"),r=(e=>{const t=JSON.parse(localStorage.getItem("currentProject")),r=e.name===t?"itemCardReversed flexContainer":"itemCard flexContainer",n=document.createElement("div");n.setAttribute("class",`${r}`),n.setAttribute("id",`project${e.id}`);const a=document.createElement("p");a.setAttribute("class","project projectSort"),a.setAttribute("id",`project${e.id}`),a.textContent=e.name;const o=document.createElement("i");o.setAttribute("class","editProject projectBtn fas fa-edit"),o.setAttribute("id",`editProject${e.id}`);const c=document.createElement("i");return c.setAttribute("class","deleteProject projectBtn far fa-trash-alt"),c.setAttribute("id",`deleteProject${e.id}`),n.appendChild(a),n.appendChild(o),n.appendChild(c),n})(e);t.appendChild(r)}function n(e){const t=document.querySelector("#taskProject"),r=document.createElement("option");r.setAttribute("value",`${e}`),r.textContent=e,t.appendChild(r)}function a(e){const t=document.querySelector("#tasksContent"),r=(e=>{const t=JSON.parse(localStorage.getItem("currentProject")),r=e.project!==t&&t?"itemCard displayNone":"itemCard flexColumn",n=document.createElement("div");n.setAttribute("class",`${r}`),n.setAttribute("id",`task${e.id}`);const a=document.createElement("div"),o=e.completed?"flexContainer  disabled":"flexContainer";a.setAttribute("class",`${o}`);const c=document.createElement("h2");c.setAttribute("class","title"),c.setAttribute("id",`taskName${e.id}`),c.textContent=e.name,a.appendChild(c);const s=document.createElement("p");s.setAttribute("class","dateFormat"),s.setAttribute("id",`taskDueDate${e.id}`),s.textContent=e.dueDate.split("-").reverse().join("/"),a.appendChild(s);const l=document.createElement("div");l.setAttribute("class","flexColumn");const i=document.createElement("i"),d=e.completed?"taksCompleted alignUp projectBtn far fa-calendar-check completeTask":"taksPending alignUp projectBtn far fa-calendar completeTask";i.setAttribute("class",`${d}`),i.setAttribute("id",`completeTask${e.id}`),l.appendChild(i);const u=document.createElement("i");u.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"),u.setAttribute("id",`showDetail${e.id}`),l.appendChild(u),a.appendChild(l),n.appendChild(a);const m=document.createElement("div");m.setAttribute("class","taskDetail"),m.setAttribute("id",`taskDetail${e.id}`),m.setAttribute("hidden","true");const p=document.createElement("div");p.setAttribute("class","flexContainer");const S=document.createElement("div");S.setAttribute("class","flexContainer detailStyle detailSize");const f=document.createElement("p");f.setAttribute("class","marginRight"),f.setAttribute("id",`taskDescription${e.id}`),f.textContent=e.description,S.appendChild(f);const k=document.createElement("p");k.setAttribute("class","marginRight"),k.setAttribute("id",`taskPriority${e.id}`),k.textContent=e.priority,S.appendChild(k);const C=document.createElement("p");C.setAttribute("class","marginRight"),C.setAttribute("id",`taskProject${e.id}`),C.textContent=e.project,S.appendChild(C),p.appendChild(S);const b=document.createElement("div");b.setAttribute("class","flexContainer detailStyle");const g=document.createElement("i");g.setAttribute("class","editTask projectBtn marginRight fas fa-edit"),g.setAttribute("id",`editTask${e.id}`),b.appendChild(g);const v=document.createElement("i");return v.setAttribute("class","deleteTask projectBtn marginRight far fa-trash-alt"),v.setAttribute("id",`deleteTask${e.id}`),b.appendChild(v),p.appendChild(b),m.appendChild(p),n.appendChild(m),n})(e);t.appendChild(r)}t("projects"),t("tasks"),t("projectCount"),t("taskCount"),t("currentProject"),function(){const e=JSON.parse(localStorage.getItem("tasks"));for(let t=0;t<e.length;t+=1)a(e[t])}(),function(){const e=JSON.parse(localStorage.getItem("projects"));for(let t=0;t<e.length;t+=1)r(e[t]),n(e[t].name)}();const o=document.querySelector("#projectFormModal"),c=document.querySelector("#taskFormModal"),s=document.querySelector("#btnNewProject"),l=document.querySelector("#btnNewTask"),i=document.querySelector("#btnCloseProject"),d=document.querySelector("#btnCloseTask"),u=document.querySelector("#saveProject"),m=document.querySelector("#saveTask"),p=document.querySelectorAll(".projectSort"),S=document.querySelectorAll(".showDetail"),f=document.querySelectorAll(".completeTask"),k=document.querySelectorAll(".editTask"),C=document.querySelectorAll(".deleteTask");s.addEventListener("click",(()=>{o.removeAttribute("hidden"),u.setAttribute("value","new")})),l.addEventListener("click",(()=>{c.removeAttribute("hidden"),m.setAttribute("value","new")})),i.addEventListener("click",(()=>{o.setAttribute("hidden","true")})),d.addEventListener("click",(()=>{c.setAttribute("hidden","true")})),window.onclick=e=>{e.target===o&&o.setAttribute("hidden","true"),e.target===c&&c.setAttribute("hidden","true")},u.addEventListener("click",(()=>{(function(){const t=document.querySelector("#projectName"),a=function(t){const r=JSON.parse(localStorage.getItem("projects"));let n=JSON.parse(localStorage.getItem("projectCount"));n+=1;const a=e(n,t);return r.push(a),localStorage.setItem("projectCount",JSON.stringify(n)),localStorage.setItem("projects",JSON.stringify(r)),a}(t.value);r(a),n(a.name),t.value=""})(),o.setAttribute("hidden","true"),u.value=""})),m.addEventListener("click",(()=>{"new"===m.value?function(){const e=document.querySelector("#taskName"),t=document.querySelector("#taskDescription"),r=document.querySelector("#taskPriority"),n=document.querySelector("#taskProject"),o=document.querySelector("#taskDueDate");a(function(e,t,r,n,a){const o=JSON.parse(localStorage.getItem("tasks"));let c=JSON.parse(localStorage.getItem("taskCount"));const s=((e,t,r,n,a,o,c=!1)=>({id:e,name:t,description:r,priority:n,project:a,dueDate:o,completed:c}))(c,e,t,r,n,a);return c+=1,o.push(s),localStorage.setItem("taskCount",JSON.stringify(c)),localStorage.setItem("tasks",JSON.stringify(o)),s}(e.value,t.value,r.value,n.value,o.value)),e.value="",t.value="",r.value="Low",n.value="Default Project",o.value=""}():function(e){const t=document.querySelector("#taskName"),r=document.querySelector("#taskDescription"),n=document.querySelector("#taskPriority"),a=document.querySelector("#taskProject"),o=document.querySelector("#taskDueDate"),c=document.querySelector(`#taskName${e}`),s=document.querySelector(`#taskDescription${e}`),l=document.querySelector(`#taskPriority${e}`),i=document.querySelector(`#taskProject${e}`),d=document.querySelector(`#taskDueDate${e}`);!function(e,t,r,n,a,o){const c=JSON.parse(localStorage.getItem("tasks")),s=c.findIndex((t=>t.id===e));c[s].name=t,c[s].description=r,c[s].priority=n,c[s].project=a,c[s].dueDate=o,localStorage.setItem("tasks",JSON.stringify(c)),c[s]}(e,t.value,r.value,n.value,a.value,o.value),c.textContent=t.value,s.textContent=r.value,l.textContent=n.value,i.textContent=a.value,d.textContent=o.value.split("-").reverse().join("/"),t.value="",r.value="",n.value="Low",a.value="Default Project",o.value=""}(parseInt(m.value,10)),c.setAttribute("hidden","true"),m.value=""})),S.forEach((e=>{e.addEventListener("click",(()=>{const t=parseInt(e.id.match(/\d+/gm),10),r=document.querySelector(`#taskDetail${t}`);r.hasAttribute("hidden")?(r.removeAttribute("hidden"),e.setAttribute("class","alignDown projectBtn fas fa-angle-double-up showDetail")):(r.setAttribute("hidden","true"),e.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"))}))})),f.forEach((e=>{e.addEventListener("click",(()=>{const t=parseInt(e.id.match(/\d+/gm),10),r=document.querySelector(`#task${t}`).firstChild;!function(e){const t=JSON.parse(localStorage.getItem("tasks")),r=t.findIndex((t=>t.id===e));return t[r].completed=!t[r].completed,localStorage.setItem("tasks",JSON.stringify(t)),t[r].completed}(t)?(e.setAttribute("class","taksPending alignUp projectBtn far fa-calendar completeTask"),r.setAttribute("class","flexContainer")):(e.setAttribute("class","taksCompleted alignUp projectBtn far fa-calendar-check completeTask"),r.setAttribute("class","flexContainer  disabled"))}))})),p.forEach((e=>{e.addEventListener("click",(()=>{const t=document.querySelector("#tasksContent").children;if("itemCardReversed flexContainer"===e.parentElement.attributes[0].value){e.parentElement.attributes[0].value="itemCard flexContainer";for(let e=0;e<t.length;e+=1)t[e].setAttribute("class","itemCard flexColumn");localStorage.setItem("currentProject",JSON.stringify(""))}else{e.parentElement.attributes[0].value="itemCardReversed flexContainer",p.forEach((t=>{t!==e&&(t.parentElement.attributes[0].value="itemCard flexContainer")}));for(let r=0;r<t.length;r+=1){const n=t[r].lastElementChild.firstElementChild.firstElementChild.lastElementChild;e.textContent===n.textContent?t[r].setAttribute("class","itemCard flexColumn"):t[r].setAttribute("class","itemCard displayNone")}localStorage.setItem("currentProject",JSON.stringify(e.textContent))}}))})),k.forEach((e=>{e.addEventListener("click",(()=>{const t=parseInt(e.id.match(/\d+/gm),10);(function(e){const t=document.querySelector("#taskName"),r=document.querySelector("#taskDescription"),n=document.querySelector("#taskPriority"),a=document.querySelector("#taskProject"),o=document.querySelector("#taskDueDate"),c=function(e){const t=JSON.parse(localStorage.getItem("tasks")),r=t.findIndex((t=>t.id===e));return t[r]}(e);t.value=c.name,r.value=c.description,n.value=c.priority,a.value=c.project,o.value=c.dueDate})(t),c.removeAttribute("hidden"),m.setAttribute("value",`${t}`)}))})),C.forEach((e=>{e.addEventListener("click",(()=>{!function(e){const t=document.querySelector(`#task${e}`);!function(e){const t=JSON.parse(localStorage.getItem("tasks")),r=t.findIndex((t=>t.id===e));t.splice(r,1),localStorage.setItem("tasks",JSON.stringify(t)),t[r]}(e),t.parentElement.removeChild(t)}(parseInt(e.id.match(/\d+/gm),10))}))}))})();