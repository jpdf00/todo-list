(()=>{"use strict";const t=(t,e)=>({id:t,name:e});function e(e){if(null===localStorage.getItem(`${e}`)){let n;"projects"===e?n=[t(0,"Default Project")]:"tasks"===e?n=[]:"Count"===e.match(/Count/g).toString()&&(n=0),localStorage.setItem(`${e}`,JSON.stringify(n))}}function n(t){const e=document.querySelector("#projectsContent"),n=(t=>{const e=document.createElement("div");e.setAttribute("class","itemCard flexContainer"),e.setAttribute("id",`project${t.id}`);const n=document.createElement("p");n.setAttribute("class","textFormat project projectSort"),n.setAttribute("id",`project${t.id}`),n.textContent=t.name;const a=document.createElement("i");a.setAttribute("class","editProject projectBtn fas fa-edit"),a.setAttribute("id",`editProject${t.id}`);const r=document.createElement("i");return r.setAttribute("class","deleteProject projectBtn far fa-trash-alt"),r.setAttribute("id",`deleteProject${t.id}`),e.appendChild(n),e.appendChild(a),e.appendChild(r),e})(t);e.appendChild(n)}function a(t){const e=document.querySelector("#taskProject"),n=document.createElement("option");n.setAttribute("value",`${t}`),n.textContent=t,e.appendChild(n)}function r(t){const e=document.querySelector("#tasksContent"),n=(t=>{const e=document.createElement("div");e.setAttribute("class","itemCard flexColumn"),e.setAttribute("id",`task${t.id}`);const n=document.createElement("div"),a=t.completed?"flexContainer  disabled":"flexContainer  enabled";n.setAttribute("class",`${a}`);const r=document.createElement("h2");r.setAttribute("class","title"),r.textContent=t.name,n.appendChild(r);const o=document.createElement("p");o.setAttribute("class","dateFormat"),o.textContent=t.dueDate.split("-").reverse().join("/"),n.appendChild(o);const c=document.createElement("div");c.setAttribute("class","flexColumn");const s=document.createElement("i"),l=t.completed?"taksCompleted alignUp projectBtn far fa-calendar-check completeTask":"taksPending alignUp projectBtn far fa-calendar completeTask";s.setAttribute("class",`${l}`),s.setAttribute("id",`completeTask${t.id}`),c.appendChild(s);const i=document.createElement("i");i.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"),i.setAttribute("id",`showDetail${t.id}`),c.appendChild(i),n.appendChild(c),e.appendChild(n);const d=document.createElement("div");d.setAttribute("class","taskDetail"),d.setAttribute("id",`taskDetail${t.id}`),d.setAttribute("hidden","true");const u=document.createElement("div");u.setAttribute("class","flexContainer");const m=document.createElement("div");m.setAttribute("class","flexContainer detailStyle detailSize");const p=document.createElement("p");p.setAttribute("class","textFormat marginRight"),p.textContent=t.description,m.appendChild(p);const h=document.createElement("p");h.setAttribute("class","textFormat marginRight"),h.textContent=t.priority,m.appendChild(h);const C=document.createElement("p");C.setAttribute("class","textFormat marginRight"),C.textContent=t.project,m.appendChild(C),u.appendChild(m);const b=document.createElement("div");b.setAttribute("class","flexContainer detailStyle");const f=document.createElement("i");f.setAttribute("class","editTask projectBtn marginRight fas fa-edit"),f.setAttribute("id",`editTask${t.id}`),b.appendChild(f);const g=document.createElement("i");return g.setAttribute("class","deleteTask projectBtn marginRight far fa-trash-alt"),g.setAttribute("id",`deleteTask${t.id}`),b.appendChild(g),u.appendChild(b),d.appendChild(u),e.appendChild(d),e})(t);e.appendChild(n)}e("projects"),e("tasks"),e("projectCount"),e("taskCount"),function(){const t=JSON.parse(localStorage.getItem("tasks"));for(let e=0;e<t.length;e+=1)r(t[e])}(),function(){const t=JSON.parse(localStorage.getItem("projects"));for(let e=0;e<t.length;e+=1)n(t[e]),a(t[e].name)}();const o=document.querySelector("#projectFormModal"),c=document.querySelector("#taskFormModal"),s=document.querySelector("#btnNewProject"),l=document.querySelector("#btnNewTask"),i=document.querySelector("#btnCloseProject"),d=document.querySelector("#btnCloseTask"),u=document.querySelector("#saveProject"),m=document.querySelector("#saveTask"),p=document.querySelectorAll(".projectSort"),h=document.querySelectorAll(".showDetail"),C=document.querySelectorAll(".completeTask");s.addEventListener("click",(()=>{o.removeAttribute("hidden"),u.setAttribute("value","new")})),l.addEventListener("click",(()=>{c.removeAttribute("hidden"),m.setAttribute("value","new")})),i.addEventListener("click",(()=>{o.setAttribute("hidden","true")})),d.addEventListener("click",(()=>{c.setAttribute("hidden","true")})),window.onclick=function(t){t.target==o&&o.setAttribute("hidden","true"),t.target==c&&c.setAttribute("hidden","true")},u.addEventListener("click",(()=>{(function(){const e=document.querySelector("#projectName"),r=function(e){const n=JSON.parse(localStorage.getItem("projects"));let a=JSON.parse(localStorage.getItem("projectCount"));a+=1;const r=t(a,e);return n.push(r),localStorage.setItem("projectCount",JSON.stringify(a)),localStorage.setItem("projects",JSON.stringify(n)),r}(e.value);n(r),a(r.name),e.value=""})(),o.setAttribute("hidden","true"),u.value=""})),m.addEventListener("click",(()=>{(function(){const t=document.querySelector("#taskName"),e=document.querySelector("#taskDescription"),n=document.querySelector("#taskPriority"),a=document.querySelector("#taskProject"),o=document.querySelector("#taskDueDate");r(function(t,e,n,a,r){const o=JSON.parse(localStorage.getItem("tasks"));let c=JSON.parse(localStorage.getItem("taskCount"));const s=((t,e,n,a,r,o,c=!1)=>({id:t,name:e,description:n,priority:a,project:r,dueDate:o,completed:c}))(c,t,e,n,a,r);return c+=1,o.push(s),localStorage.setItem("taskCount",JSON.stringify(c)),localStorage.setItem("tasks",JSON.stringify(o)),s}(t.value,e.value,n.value,a.value,o.value)),t.value="",e.value="",n.value="",a.value="",o.value=""})(),c.setAttribute("hidden","true"),m.value=""})),h.forEach((t=>{t.addEventListener("click",(()=>{const e=parseInt(t.id.match(/\d+/gm),10),n=document.querySelector(`#taskDetail${e}`);n.hasAttribute("hidden")?(n.removeAttribute("hidden"),t.setAttribute("class","alignDown projectBtn fas fa-angle-double-up showDetail")):(n.setAttribute("hidden","true"),t.setAttribute("class","alignDown projectBtn fas fa-angle-double-down showDetail"))}))})),C.forEach((t=>{t.addEventListener("click",(()=>{const e=parseInt(t.id.match(/\d+/gm),10),n=document.querySelector(`#task${e}`).firstChild;!function(t){const e=JSON.parse(localStorage.getItem("tasks")),n=e.findIndex((e=>e.id===t));return e[n].completed=!e[n].completed,localStorage.setItem("tasks",JSON.stringify(e)),e[n].completed}(e)?(t.setAttribute("class","taksPending alignUp projectBtn far fa-calendar completeTask"),n.setAttribute("class","flexContainer  enabled")):(t.setAttribute("class","taksCompleted alignUp projectBtn far fa-calendar-check completeTask"),n.setAttribute("class","flexContainer  disabled"))}))})),p.forEach((t=>{t.addEventListener("click",(()=>{parseInt(t.id.match(/\d+/gm),10);const e=document.querySelector("#tasksContent").children;for(let n=0;n<e.length;n+=1){const a=e[n].lastElementChild.firstElementChild.firstElementChild.lastElementChild;t.textContent===a.textContent?e[n].setAttribute("class","itemCard flexColumn"):e[n].setAttribute("class","itemCard displayNone")}}))}))})();